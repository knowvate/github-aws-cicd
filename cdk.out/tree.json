{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.206.0"},"children":{"PipelineStack":{"id":"PipelineStack","path":"PipelineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.206.0"},"children":{"CodePipelineArtifactStore":{"id":"CodePipelineArtifactStore","path":"PipelineStack/CodePipelineArtifactStore","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodePipelineArtifactStore/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"versioningConfiguration":{"status":"Enabled"}}}}}},"PreSignedUrlLambdaRole":{"id":"PreSignedUrlLambdaRole","path":"PipelineStack/PreSignedUrlLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportPreSignedUrlLambdaRole":{"id":"ImportPreSignedUrlLambdaRole","path":"PipelineStack/PreSignedUrlLambdaRole/ImportPreSignedUrlLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/PreSignedUrlLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"CodeBuildServiceRole":{"id":"CodeBuildServiceRole","path":"PipelineStack/CodeBuildServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportCodeBuildServiceRole":{"id":"ImportCodeBuildServiceRole","path":"PipelineStack/CodeBuildServiceRole/ImportCodeBuildServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/CodeBuildServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CodeBuildServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodeBuildServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents","s3:GetObject","s3:GetObjectVersion","s3:PutObject","s3:GetBucketAcl","s3:GetBucketLocation","codebuild:BatchGetBuilds","codebuild:StartBuild"],"Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"CodeBuildProject4B91CF3F"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"CodeBuildProject4B91CF3F"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"CodeBuildProject4B91CF3F"},"-*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CodePipelineArtifactStore2354D54A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CodePipelineArtifactStore2354D54A","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CodeBuildServiceRoleDefaultPolicyC1569022","roles":[{"Ref":"CodeBuildServiceRoleA9C1F6A8"}]}}}}}}},"CodeBuildProject":{"id":"CodeBuildProject","path":"PipelineStack/CodeBuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.Project","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodeBuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"NO_ARTIFACTS"},"cache":{"type":"NO_CACHE"},"encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["CodeBuildServiceRoleA9C1F6A8","Arn"]},"source":{"type":"GITHUB","gitCloneDepth":1,"reportBuildStatus":true,"location":"https://github.com/knowvate/github-aws-cicd.git","buildSpec":"buildspec.yaml"},"sourceVersion":"main"}}}}},"CodePipelineServiceRole":{"id":"CodePipelineServiceRole","path":"PipelineStack/CodePipelineServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportCodePipelineServiceRole":{"id":"ImportCodePipelineServiceRole","path":"PipelineStack/CodePipelineServiceRole/ImportCodePipelineServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/CodePipelineServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CodePipelineServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodePipelineServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents","s3:GetObject","s3:GetObjectVersion","s3:PutObject","s3:GetBucketAcl","s3:GetBucketLocation","codebuild:BatchGetBuilds","codebuild:StartBuild"],"Effect":"Allow","Resource":"*"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CodePipelineArtifactStore2354D54A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CodePipelineArtifactStore2354D54A","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["CodePipelineBuildCodePipelineActionRoleD28C17CE","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineServiceRoleDefaultPolicyF140DAAD","roles":[{"Ref":"CodePipelineServiceRole8DEB6B6A"}]}}}}}}},"CodePipeline":{"id":"CodePipeline","path":"PipelineStack/CodePipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodePipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"CodePipelineArtifactStore2354D54A"}},"name":"PipelineStack","pipelineType":"V2","roleArn":{"Fn::GetAtt":["CodePipelineServiceRole8DEB6B6A","Arn"]},"stages":[{"name":"Source","actions":[{"name":"Source","outputArtifacts":[{"name":"SourceCode"}],"actionTypeId":{"category":"Source","version":"1","owner":"ThirdParty","provider":"GitHub"},"configuration":{"Owner":"knowvate","Repo":"github-aws-cicd","Branch":"main","OAuthToken":"{{resolve:secretsmanager:GITHUB_ACCESS_TOKEN:SecretString:::}}","PollForSourceChanges":false},"runOrder":1}]},{"name":"Build","actions":[{"name":"Build","inputArtifacts":[{"name":"SourceCode"}],"outputArtifacts":[{"name":"BuildOutput"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"CodeBuildProject4B91CF3F"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineBuildCodePipelineActionRoleD28C17CE","Arn"]}}]}]}}},"Source":{"id":"Source","path":"PipelineStack/CodePipeline/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Source":{"id":"Source","path":"PipelineStack/CodePipeline/Source/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"WebhookResource":{"id":"WebhookResource","path":"PipelineStack/CodePipeline/Source/Source/WebhookResource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnWebhook","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Webhook","aws:cdk:cloudformation:props":{"authentication":"GITHUB_HMAC","authenticationConfiguration":{"secretToken":"{{resolve:secretsmanager:GITHUB_ACCESS_TOKEN:SecretString:::}}"},"filters":[{"jsonPath":"$.ref","matchEquals":"refs/heads/{Branch}"}],"registerWithThirdParty":true,"targetAction":"Source","targetPipeline":{"Ref":"CodePipelineB74E5936"},"targetPipelineVersion":1}}}}}}},"Build":{"id":"Build","path":"PipelineStack/CodePipeline/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Build":{"id":"Build","path":"PipelineStack/CodePipeline/Build/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/CodePipeline/Build/Build/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.206.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/CodePipeline/Build/Build/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.206.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/CodePipeline/Build/Build/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineServiceRole8DEB6B6A","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/CodePipeline/Build/Build/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.206.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/CodePipeline/Build/Build/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.206.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["CodeBuildProject4B91CF3F","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineBuildCodePipelineActionRoleDefaultPolicy828529E8","roles":[{"Ref":"CodePipelineBuildCodePipelineActionRoleD28C17CE"}]}}}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"PipelineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"PipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.206.0"}},"Condition":{"id":"Condition","path":"PipelineStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.206.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.206.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.206.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}